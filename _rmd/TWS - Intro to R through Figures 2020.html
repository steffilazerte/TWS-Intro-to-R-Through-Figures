<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>TWS - Intro to R Through Figures</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="pres_styles.css" type="text/css" />
    <link rel="stylesheet" href="global_styles.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">

class: title-slide, nobar


![:img right: 25px, bottom: 25px, 50%, ,](https://github.com/allisonhorst/stats-illustrations/raw/master/rstats-artwork/ggplot2_masterpiece.png)

.footnote[Artwork by [@allison_horst](https://github.com/allisonhorst/stats-illustrations)]


## TWS R Workshop
# Creating Figures as an Intro to R
## Using the `ggplot2` package

### .small[*Steffi LaZerte*]






---
background-image: url(figures/steffi_office.jpg)
background-position: right 25px bottom 50px
background-size: 50%

# Introductions

**Instructor**

### Dr. Steffi LaZerte

- Background in Biology (Animal Behaviour)
- Working with R since 2007
- Professional R programmer/consultant&lt;br&gt;since 2017

---
background-image: url(figures/alex.jpg)
background-position: right 25px bottom 25px
background-size: 40%

# Introductions

**Assistant**

### Dr. Alex Koiter

- Physical Geographer
- Working with R since 2010
- Assistant Professor in Geography and   
  Environment, Brandon University



---
# What about you?

- Name
- Background (Area of study, etc.)
- Familiarity with R (or other programming languages)
    - I've heard of R
    - I've used R
    - I use R all the time


---
# Outline

### 1. A little about R

### 2. Creating figures with `ggplot2`

### 3. Combining figures with `patchwork`

### 4. Saving figures


--

![:spacer 15px]()

&gt; **Taken this or a similar workshop before?**
&gt; 
&gt; During activities consider...  
&gt; 
&gt; - Extra activities labeled "Too Easy?"
&gt; - Using your own data 
&gt; - Exploring other aspects of ggplot2 that interest you
&gt;
&gt; Feel free to ask questions even if it's not the "official" activity!


---
class: section

# What is R?

---
# R is Programming language

&gt; A programming **language** is a way to give instructions in order to get a computer to do something

- You need to know the language (i.e., the code)
- Computers don't know what you mean, only what you type (unfortunately)
- Spelling, punctuation, and capitalization all matter!

## For example

**R, what is 56 times 5.8?**


```r
56 * 5.8
```

```
## [1] 324.8
```

---
# Use code to tell R what to do

**R, what is the average of numbers 1, 2, 3, 4?**


```r
mean(c(1, 2, 3, 4))
```

```
## [1] 2.5
```

--

**R, save this value for later**


```r
steffis_mean &lt;- mean(c(1, 2, 3, 4))
```

--

**R, multiply this value by 6**


```r
steffis_mean * 6
```

```
## [1] 15
```


---
layout: true
# Why R?

---
background-image: url(figures/R_hard.png)
background-position: right 15% bottom 10%
background-size: 70%

## R is hard

---
background-image: url(figures/R_powerful2_edit.png)
background-position: center bottom 40%
background-size: 70%

## But R is powerful (and reproducible)!

--

.footnote[(I made these slides with **R**markdown)]

---
background-image: url(figures/spatial.png)
background-position: center bottom 10%
background-size: 40%

## R is also beautiful

---
background-image: url(figures/R_free.png)
background-position: center bottom 40%
background-size: 70%

## R is affordable (i.e., free!)



---
layout: false
background-image: url(figures/impostR_en.png)
background-position: center center
background-size: 70%

# Impost**R** Syndrome

---
background-image: url(figures/impostR_en.png)
background-position: right 75px top 25%
background-size: 30%

# Impost**R** Syndrome

![:img left: 25px, bottom: 175px, 60%, , David Whittaker](figures/imposter.jpg)

--

![:box 50%, 80%, 75%](&lt;strong&gt;Moral of the story?&lt;/strong&gt;&lt;br&gt;Make friends, code in groups, learn together and don't beat yourself up)


---
class: nobar
![:img center, bottom: 0, 53%, ,](https://github.com/allisonhorst/stats-illustrations/raw/master/rstats-artwork/r_first_then.png)


.footnote[[@allison_horst](https://github.com/allisonhorst/stats-illustrations)]


---
class: section

# About R

---
class: split-50
# Code, Output, Scripts

.columnl[
## Code
- The actual commands

## Output
- The result of running code or a script

## Script
- A text file full of code that you want to run
- You should always keep your code in a script
]


--

.columnr[

## For example:


```r
mean(c(1, 2, 3, 4))
```

```
## [1] 2.5
```
]


![:here right: 100px, top: 200px](&lt;strong&gt;Code&lt;/strong&gt;)
![:here right: 100px, top: 250px](&lt;strong&gt;Output&lt;/strong&gt;)

![:here right: 100px, top: 310px](&lt;strong&gt;Script&lt;/strong&gt;)

![:img right: 200px, bottom: 5px, 30%, ,](figures/script.png)



---
# RStudio vs. R

![:img left: 15%, top: 125px, 300px, , RStudio](https://d33wubrfki0l68.cloudfront.net/3099a8a5ab437c8cca2446dfb08383ecfca761ec/0377b/wp-content/uploads/2014/06/rstudio-ball.png)
![:img right: 15%, top: 125px, 400px, , R](https://www.r-project.org/logo/Rlogo.png)

![:spacer 150px]()

- **RStudio** is not **R**
- RStudio is a User Interface or IDE (integrated development environment)
    - (i.e., Makes coding simpler)

---
class: split-50
# `functions()` - Do things, Return things

**`mean()`, `read_csv()`, `ggplot()`, `c()`, etc.**

--

- Always have `()`
- Can take **arguments** (think 'options')
    - `mean(x = c(2, 10, 45))`, 
    - `mean(x = c(NA, 10, 2, 65), na.rm = TRUE)`

--

- Arguments defined by **name** or by **position**
- With correct position, do not need to specify by name

![:spacer 15px]()

.columnl[
### By name:

```r
mean(x = c(1, 5, 10))
```

```
## [1] 5.333333
```
]

.columnr[
### By position:

```r
mean(c(1, 5, 10))
```

```
## [1] 5.333333
```
]

---
class: split-15
# R documentation

.columnl[

```r
?mean
```
]

--
![:img right: 10%, bottom: 5%, 60%, , ](figures/mean_docs.png)


---
class: split-45
# `Data`

Generally kept in `vectors` or `data.frames`

- These are objects with names (like functions)
- We can use `&lt;-` to assign values to objects (assignment)

![:spacer 20px]()

.columnl[
### Vector (1 dimension)


```r
my_data &lt;- c("a", 100, "c")
my_data
```

```
## [1] "a"   "100" "c"
```
]

.columnr[
### Data frame (2 dimensions)


```r
my_data &lt;- data.frame(site = c("s1", "s2", "s3"),
                      count = c(101, 102, 103),
                      treatment = c("a", "b", "c"))
my_data
```

```
##   site count treatment
## 1   s1   101         a
## 2   s2   102         b
## 3   s3   103         c
```
]

![:box 10%, 70%, 175px](rows x columns)

---
class: section

# Your first *real* code!

---
# First Code




&lt;code class ='r hljs remark-code'&gt;# First load the packages&lt;br&gt;library(palmerpenguins)&lt;br&gt;library(ggplot2)&lt;br&gt;&lt;br&gt;# Now create the figure&lt;br&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, colour = species)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;

.spacer[ ]

- Copy/paste or type this into the script window in RStudio
  - You may have to go to File &gt; New File &gt; R Script
- Click anywhere on the first line of code
- Use the 'Run' button to run this code, **or** use the short-cut `Ctrl-Enter`
    - Repeat until all the code has run

---
layout: true
# First Code

---



&lt;code class ='r hljs remark-code'&gt;# First load the packages&lt;br&gt;library(palmerpenguins)&lt;br&gt;library(ggplot2)&lt;br&gt;&lt;br&gt;# Now create the figure&lt;br&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, colour = species)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;

```

## Warning: Removed 2 rows containing missing values (geom_point).

```


&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-92-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---


&lt;code class ='r hljs remark-code'&gt;# First load the packages&lt;br&gt;library(&lt;span style="background-color:#ffff7f"&gt;palmerpenguins&lt;/span&gt;)&lt;br&gt;library(&lt;span style="background-color:#ffff7f"&gt;ggplot2&lt;/span&gt;)&lt;br&gt;&lt;br&gt;# Now create the figure&lt;br&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, colour = species)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;

```

## Warning: Removed 2 rows containing missing values (geom_point).

```


&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-93-1.png" width="60%" style="display: block; margin: auto;" /&gt;

![:box 50%, 20%, 40%](Packages&lt;br&gt;
&lt;code&gt;ggplot2&lt;/code&gt; and &lt;code&gt;palmerpenguins&lt;/code&gt;)

---


&lt;code class ='r hljs remark-code'&gt;# First load the packages&lt;br&gt;&lt;span style="background-color:#ffff7f"&gt;library&lt;/span&gt;(palmerpenguins)&lt;br&gt;&lt;span style="background-color:#ffff7f"&gt;library&lt;/span&gt;(ggplot2)&lt;br&gt;&lt;br&gt;# Now create the figure&lt;br&gt;&lt;span style="background-color:#ffff7f"&gt;ggplot&lt;/span&gt;(data = penguins, &lt;span style="background-color:#ffff7f"&gt;aes&lt;/span&gt;(x = body_mass_g, y = bill_length_mm, colour = species)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style="background-color:#ffff7f"&gt;geom_point&lt;/span&gt;()&lt;/code&gt;

```

## Warning: Removed 2 rows containing missing values (geom_point).

```


&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-94-1.png" width="60%" style="display: block; margin: auto;" /&gt;

![:box 25%, 15%, 30%](Functions:&lt;br&gt;
&lt;code&gt;library(&amp;rpar;&lt;/code&gt;, &lt;code&gt;ggplot(&amp;rpar;&lt;/code&gt;&lt;br&gt;&lt;code&gt;aes(&amp;rpar;&lt;/code&gt;, and &lt;code&gt;geom_point(&amp;rpar;&lt;/code&gt;)

---


&lt;code class ='r hljs remark-code'&gt;# First load the packages&lt;br&gt;library(palmerpenguins)&lt;br&gt;library(ggplot2)&lt;br&gt;&lt;br&gt;# Now create the figure&lt;br&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, colour = species)) &lt;span style="background-color:#ffff7f"&gt;+&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;

```

## Warning: Removed 2 rows containing missing values (geom_point).

```


&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-95-1.png" width="60%" style="display: block; margin: auto;" /&gt;

![:box 20%, 20%, 25%](&lt;code&gt;+&lt;/code&gt;&lt;br&gt;(Specific to &lt;code&gt;ggplot2&lt;/code&gt;&amp;rpar;)

---

&lt;code class ='r hljs remark-code'&gt;# First load the packages&lt;br&gt;library(palmerpenguins)&lt;br&gt;library(ggplot2)&lt;br&gt;&lt;br&gt;# Now create the figure&lt;br&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, colour = species)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;

```

## Warning: Removed 2 rows containing missing values (geom_point).

```


&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-96-1.png" width="60%" style="display: block; margin: auto;" /&gt;

![:box 22%, 57%, 17%](Figure!)

---

&lt;code class ='r hljs remark-code'&gt;# First load the packages&lt;br&gt;library(palmerpenguins)&lt;br&gt;library(ggplot2)&lt;br&gt;&lt;br&gt;# Now create the figure&lt;br&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, colour = species)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;

```

## Warning: Removed 2 rows containing missing values (geom_point).

```


&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-97-1.png" width="60%" style="display: block; margin: auto;" /&gt;

![:box 23%, 48%, 18%](Warning)

---


&lt;code class ='r hljs remark-code'&gt;&lt;span style="background-color:#ffff7f"&gt;# First load the packages&lt;/span&gt;&lt;br&gt;library(palmerpenguins)&lt;br&gt;library(ggplot2)&lt;br&gt;&lt;br&gt;&lt;span style="background-color:#ffff7f"&gt;# Now create the figure&lt;/span&gt;&lt;br&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, colour = species)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;

```

## Warning: Removed 2 rows containing missing values (geom_point).

```


&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-98-1.png" width="60%" style="display: block; margin: auto;" /&gt;

![:label 67%, 18.5%, 20%](Comments)

---
layout: false
class: section

# Now you know R!

### Let's get started

---

# Our data set: Palmer Penguins!


![:img center, bottom: 0, 78%, ,](https://raw.githubusercontent.com/allisonhorst/palmerpenguins/master/man/figures/lter_penguins.png)

.footnote[Artwork by [@allison_horst](https://github.com/allisonhorst/stats-illustrations)]

![:img right: 1%, top: 1%, 10%, ,](https://raw.githubusercontent.com/allisonhorst/palmerpenguins/master/man/figures/logo.png)

---
# Our data set: Palmer Penguins!

.small[

```r
library(palmerpenguins)
penguins
```

```
## # A tibble: 344 x 8
##    species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year
##    &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;
##  1 Adelie  Torgersen           39.1          18.7               181        3750 male    2007
##  2 Adelie  Torgersen           39.5          17.4               186        3800 female  2007
##  3 Adelie  Torgersen           40.3          18                 195        3250 female  2007
##  4 Adelie  Torgersen           NA            NA                  NA          NA &lt;NA&gt;    2007
##  5 Adelie  Torgersen           36.7          19.3               193        3450 female  2007
##  6 Adelie  Torgersen           39.3          20.6               190        3650 male    2007
##  7 Adelie  Torgersen           38.9          17.8               181        3625 female  2007
##  8 Adelie  Torgersen           39.2          19.6               195        4675 male    2007
##  9 Adelie  Torgersen           34.1          18.1               193        3475 &lt;NA&gt;    2007
## 10 Adelie  Torgersen           42            20.2               190        4250 &lt;NA&gt;    2007
## # … with 334 more rows
```
]



![:img right: 10%, bottom: 0, 25%, ,](https://raw.githubusercontent.com/allisonhorst/palmerpenguins/master/man/figures/lter_penguins.png)

.footnote[Artwork by [@allison_horst](https://github.com/allisonhorst/stats-illustrations)]


![:img right: 1%, top: 1%, 10%, ,](https://raw.githubusercontent.com/allisonhorst/palmerpenguins/master/man/figures/logo.png)


--

&gt; Your turn! Run this code and look at the output in the console

---
# A basic plot




&lt;code class ='r hljs remark-code'&gt;library(palmerpenguins)&lt;br&gt;library(ggplot2)&lt;br&gt;&lt;br&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;


&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-99-1.png" width="70%" style="display: block; margin: auto;" /&gt;


---
# Break it down

&lt;code class ='r hljs remark-code'&gt;&lt;span style="background-color:#ffff7f"&gt;library(palmerpenguins)&lt;/span&gt;&lt;br&gt;library(ggplot2)&lt;br&gt;&lt;br&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm)) +&lt;br&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;

![:spacer 10px]()

### `library(palmerpenguins)`
- Load the `palmerguins` package so we have access to `penguins` data


---
# Break it down

&lt;code class ='r hljs remark-code'&gt;library(palmerpenguins)&lt;br&gt;&lt;span style="background-color:#ffff7f"&gt;library(ggplot2)&lt;/span&gt;&lt;br&gt;&lt;br&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm)) +&lt;br&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;

![:spacer 10px]()


### `library(ggplot2)`
- Load the `ggplot2` package (which gives us access to the `ggplot()` function among others)

---
# Break it down

&lt;code class ='r hljs remark-code'&gt;library(palmerpenguins)&lt;br&gt;library(ggplot2)&lt;br&gt;&lt;br&gt;&lt;span style="background-color:#ffff7f"&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm)) +&lt;/span&gt;&lt;br&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;

![:spacer 10px]()

### `ggplot()`
- Set the attributes of your plot
- **`data`** = Dataset
- **`aes`** = Aesthetics (how the data are used)
- Think of this as your plot defaults

---

# Break it down

&lt;code class ='r hljs remark-code'&gt;library(palmerpenguins)&lt;br&gt;library(ggplot2)&lt;br&gt;&lt;br&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm)) +&lt;br&gt;&lt;span style="background-color:#ffff7f"&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;geom_point()&lt;/span&gt;&lt;/code&gt;

![:spacer 10px]()

### `geom_point()`

- Choose a `geom` function to display the data
- Always *added* to a `ggplot()` call with `+`

&gt; ggplots are essentially layered objects, starting with a call to `ggplot()`


---
class: split-50
# Plots are layered

.columnl[
.small[

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g))
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-25-1.png" width="90%" style="display: block; margin: auto;" /&gt;
]]

.columnr[
.small[

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g)) +
* geom_boxplot()
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-26-1.png" width="90%" style="display: block; margin: auto;" /&gt;
]]

---
class: split-50
# Plots are layered

.columnl[
.small[

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g))
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-27-1.png" width="90%" style="display: block; margin: auto;" /&gt;
]]

.columnr[
.small[

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g)) +
* geom_point()
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-28-1.png" width="90%" style="display: block; margin: auto;" /&gt;
]]

---
class:split-50
# Plots are layered

.columnl[
.small[

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g))
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-29-1.png" width="90%" style="display: block; margin: auto;" /&gt;
]]

.columnr[
.small[

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g)) +
* geom_violin()
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-30-1.png" width="90%" style="display: block; margin: auto;" /&gt;
]]

---
class: split-50
# Plots are layered

.columnl[
### You can add multiple layers

.small[

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g)) +
  geom_boxplot()
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-31-1.png" width="90%" style="display: block; margin: auto;" /&gt;
]]

---
class: split-50
# Plots are layered

.columnl[
### You can add multiple layers

.small[

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g)) +
  geom_boxplot() + 
* geom_point(size = 2, colour = "red")
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-32-1.png" width="90%" style="display: block; margin: auto;" /&gt;
]]

--

.columnr[


### Order matters

.small[

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g)) +
* geom_point(size = 2, colour = "red") +
  geom_boxplot()
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-33-1.png" width="90%" style="display: block; margin: auto;" /&gt;
]]

---
class: split-50
# Plots are objects


### Any ggplot can be saved as an object


```r
g &lt;- ggplot(data = penguins, aes(x = sex, y = body_mass_g))
```

--

.columnl[

```r
g
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-35-1.png" width="90%" style="display: block; margin: auto;" /&gt;
]

--

.columnr[

```r
g + geom_boxplot()
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-36-1.png" width="90%" style="display: block; margin: auto;" /&gt;
]



---
class: section

# More Geoms

### (Plot types)

---
# Geoms: Lines


```r
ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm)) +
* geom_line()
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-37-1.png" width="90%" style="display: block; margin: auto;" /&gt;


---
# Geoms: Histogram


```r
ggplot(data = penguins, aes(x = body_mass_g)) +
* geom_histogram(binwidth = 100)
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-38-1.png" width="90%" style="display: block; margin: auto;" /&gt;

--

![:label 50%, 18%, 25%](&lt;strong&gt;Note:&lt;/strong&gt; We only need 1 aesthetic here (x&amp;rpar;)

---
# Geoms: Barplots

### Let `ggplot` count your data


```r
ggplot(data = penguins, aes(x = sex)) +
* geom_bar()
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-39-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---
# Geoms: Barplots

### You can also provide the counts


```r
# Create our own data frame
species &lt;- data.frame(species = c("Adelie", "Chinstrap", "Gentoo"),  
                      n = c(152, 68, 124))

ggplot(data = species, aes(x = species, y = n)) +
* geom_bar(stat = "identity")
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-40-1.png" width="90%" style="display: block; margin: auto;" /&gt;


---
# Your Turn: Create this plot




&lt;code class ='r hljs remark-code'&gt;library(ggplot2)&lt;br&gt;&lt;br&gt;ggplot(data = &lt;span style="background-color:#ffff7f"&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;, aes(x = &lt;span style="background-color:#ffff7f"&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;, y = &lt;span style="background-color:#ffff7f"&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_&lt;span style="background-color:#ffff7f"&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;(&lt;span style="background-color:#ffff7f"&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;)&lt;/code&gt;


&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-104-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---
exclude: TRUE
# Your Turn: Create this plot


&lt;code class ='r hljs remark-code'&gt;library(ggplot2)&lt;br&gt;&lt;br&gt;ggplot(data = penguins, aes(x = island, y = bill_depth_mm)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_boxplot(colour = "blue")&lt;/code&gt;


&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-105-1.png" width="90%" style="display: block; margin: auto;" /&gt;


---
class: section
# Showing data by group


---
# Mapping aesthetics


```r
ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm)) +
  geom_point()
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-43-1.png" width="80%" style="display: block; margin: auto;" /&gt;

---
# Mapping aesthetics




&lt;code class ='r hljs remark-code'&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, &lt;span style="background-color:#ffff7f"&gt;colour = sex&lt;/span&gt;)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;


&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-106-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---
# Mapping aesthetics

### `ggplot` automatically populates the legends (combining where it can)


```r
ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, colour = sex, shape = sex)) +
  geom_point()
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-45-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---
# Faceting: `facet_wrap()`


```r
ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, colour = sex)) +
  geom_point() +
* facet_wrap(~ species)
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-46-1.png" width="90%" style="display: block; margin: auto;" /&gt;


![:box 15%, 25%, 20%](Split plots by &lt;strong&gt;one&lt;/strong&gt; grouping variable)

---
# Faceting: `facet_grid()`


```r
ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, colour = sex)) +
  geom_point() +
* facet_grid(sex ~ species)
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-47-1.png" width="90%" style="display: block; margin: auto;" /&gt;


![:box 15%, 25%, 20%](Split plots by &lt;strong&gt;two&lt;/strong&gt; grouping variables)


---
# Your Turn: Create this plot




&lt;code class ='r hljs remark-code'&gt;ggplot(data = &lt;span style="background-color:#ffff7f"&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;, aes(&lt;span style="background-color:#ffff7f"&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;)) + &lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style="background-color:#ffff7f"&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt; + &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style="background-color:#ffff7f"&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/code&gt;


&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-107-1.png" width="90%" style="display: block; margin: auto;" /&gt;

![:spacer 15px]()

&gt; **Hint:** `colour` is for outlining with a colour, `fill` is for 'filling' with a colour
&gt;
&gt; **Too Easy?** Split boxplots by sex **and** island


---
exclude: TRUE
# Your Turn: Create this plot


&lt;code class ='r hljs remark-code'&gt;ggplot(data = penguins, aes(x = sex, y = flipper_length_mm, fill = sex)) + &lt;br&gt;&amp;nbsp;&amp;nbsp;geom_boxplot() + &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;facet_wrap(~ species)&lt;/code&gt;


&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-108-1.png" width="90%" style="display: block; margin: auto;" /&gt;

![:spacer 15px]()

&gt; **Hint:** `colour` is for outlining with a colour, `fill` is for 'filling' with a colour
&gt;
&gt; **Too Easy?** Split boxplots by sex **and** island

---
exclude: TRUE
# Your Turn: Create this plot

**Too Easy?**


```r
ggplot(data = penguins, aes(x = sex, y = flipper_length_mm, fill = island)) + 
  geom_boxplot() +                                                      
  facet_wrap(~ species) 
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-50-1.png" width="90%" style="display: block; margin: auto;" /&gt;

![:spacer 15px]()

&gt; Small change (`fill = sex` to `fill = island`) results in completely different plot


---
exclude: true
class: section

# Adding Statistics to Plots

---
exclude: true
# Using stats: Summarizing data

### Add data means as points

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g)) +
* stat_summary(geom = "point", fun.y = mean)
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-51-1.png" width="90%" style="display: block; margin: auto;" /&gt;


---
exclude: true
# Using stats: Summarizing data

### Add error bars, calculated from the data

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g)) +
  stat_summary(geom = "point", fun.y = mean) +
* stat_summary(geom = "errorbar", width = 0.05, fun.data = mean_se)
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-52-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---
class: section

# Trendlines / Regression Lines

---
# Trendlines / Regression lines

### `geom_line()` is connect-the-dots, not a trend or linear model


```r
ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm)) +
  geom_point() +
  geom_line()
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-53-1.png" width="90%" style="display: block; margin: auto;" /&gt;

--

![:box 25%, 25%, 20%](Not what we're looking for)

---
# Trendlines / Regression lines
### Let's add a trend line properly

Start with basic plot:

```r
g &lt;- ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm)) +
  geom_point()
g
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-54-1.png" width="90%" style="display: block; margin: auto;" /&gt;


---
class: split-45
# Trendlines / Regression lines

.columnl[
### Add the `stat_smooth()`
- `lm` is for "linear model" (i.e. trendline)
- grey ribbon = standard error
]

.columnr[



&lt;code class ='r hljs remark-code'&gt;g + &lt;span style="background-color:#ffff7f"&gt;stat_smooth(method = "lm")&lt;/span&gt;&lt;/code&gt;
]

![:spacer 55px]()

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-56-1.png" width="90%" style="display: block; margin: auto;" /&gt;


---
class: split-45
# Trendlines / Regression lines

.columnl[
### Add the `stat_smooth()`
- remove the grey ribbon `se = FALSE`
]

.columnr[



&lt;code class ='r hljs remark-code'&gt;g + stat_smooth(method = "lm", &lt;span style="background-color:#ffff7f"&gt;se = FALSE&lt;/span&gt;)&lt;/code&gt;

]

![:spacer 55px]()

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-58-1.png" width="90%" style="display: block; margin: auto;" /&gt;



---
# Trendlines / Regression lines

### A line for each group
- Specify group (here we use `colour` to specify `species`)


```r
g &lt;- ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, colour = species)) +
  geom_point()
g
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-59-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---
# Trendlines / Regression lines

### A line for each group
- `stat_smooth()` automatically uses the same grouping


```r
g + stat_smooth(method = "lm", se = FALSE)
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-60-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---
# Trendlines / Regression lines

### A line for each group AND overall

```r
g +  
  stat_smooth(method = "lm", se = FALSE) + 
  stat_smooth(method = "lm", se = FALSE, colour = "black")
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-61-1.png" width="90%" style="display: block; margin: auto;" /&gt;


---
# Your Turn: Create this plot

- A scatter plot: Flipper Length by Body Mass grouped by Species
- With *a single regression line for the overall trend*


&gt; **Too Easy?** Create a separate plot for each sex as well

---
exclude: TRUE

# Your Turn: Create this plot

- A scatter plot: Flipper Length by Body Mass grouped by Species
- With *a single regression line for the overall trend*


```r
ggplot(data = penguins, aes(x = body_mass_g, y = flipper_length_mm, colour = species)) + 
  geom_point() +
  stat_smooth(se = FALSE, colour = "black", method = "lm")
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-62-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---
exclude: TRUE

# Your Turn: Create this plot

**Too Easy?**


```r
ggplot(data = penguins, aes(x = body_mass_g, y = flipper_length_mm, colour = species)) + 
  geom_point() +
  stat_smooth(se = FALSE, colour = "black", method = "lm") +
  facet_wrap(~sex)
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-63-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---
class: section

# Customizing plots

---
# Customizing: Starting plot

### Let's work with this plot


```r
g &lt;- ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, colour = species)) +
  geom_point()
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-65-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---
# Customizing: Labels


```r
g + labs(title = "Bill Length vs. Body Mass", 
         x = "Body Mass (g)", 
         y = "Bill Length (mm)",
         colour = "Species", tag = "A")
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-66-1.png" width="90%" style="display: block; margin: auto;" /&gt;


--

![:box 30%, 20%, 40%](&lt;strong&gt;Practice for later&lt;/strong&gt;&lt;br&gt; Add proper labels to some of your previous plots)

---
class: split-50
# Customizing: Built-in themes

.columnl[
&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-67-1.png" width="95%" style="display: block; margin: auto;" /&gt;&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-67-2.png" width="95%" style="display: block; margin: auto;" /&gt;
]

.columnr[
&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-68-1.png" width="95%" style="display: block; margin: auto;" /&gt;&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-68-2.png" width="95%" style="display: block; margin: auto;" /&gt;
]


---
# Customizing: Data range

### Limit the data (exclude data)

```r
g + xlim(c(4000, 5000))
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/lim_warn-1.png" width="90%" style="display: block; margin: auto;" /&gt;


```
## Warning: Removed 228 rows containing missing values (geom_point).
```


---
# Customizing: Axes

`scale_` + (`x` or `y`) + type (`contiuous`, `discrete`, `date`, `datetime`)

- `scale_x_continuous()`
- `scale_y_discrete()`
- etc.

### Common arguments


```r
g + scale_x_continuous(breaks = seq(0, 20, 10)) # Tick breaks
g + scale_x_continuous(limits = c(0, 15))       # xlim() is a shortcut for this
g + scale_x_continuous(expand = c(0, 0))        # Space between axis and data
```

---
# Customizing: Axes

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-71-1.png" width="80%" style="display: block; margin: auto;" /&gt;




---
# Customizing: Aesthetics

### Using scales

`scale_` + aesthetic (`colour`, `fill`, `size`, etc.) + type (`manual`, `continuous`, `datetime`, etc.)


```r
g + scale_colour_manual(name = "Type", values = c("green", "purple", "yellow"))
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-72-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---
# Customizing: Aesthetics

### Using scales

Or be very explicit:


```r
g + scale_colour_manual(name = "Type", 
                        values = c("Adelie" = "green", "Gentoo" = "purple", "Chinstrap" = "yellow"), 
                        na.value = "black")
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-73-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---
# Customizing: Aesthetics

### For colours, consider colour-blind-friendly scales


```r
library(ggthemes)
g + scale_colour_colorblind(name = "Type")
g + scale_colour_viridis_d(name = "Type")
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-75-1.png" width="100%" style="display: block; margin: auto;" /&gt;


---
# Customizing: Aesthetics

### Forcing

Remove the association between a variable and an aesthetic




&lt;code class ='r hljs remark-code'&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, colour = sex)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point(&lt;span style="background-color:#ffff7f"&gt;colour = "green", size = 5&lt;/span&gt;) +&lt;br&gt;&amp;nbsp;&amp;nbsp;stat_smooth(method = "lm", se = FALSE, &lt;span style="background-color:#ffff7f"&gt;colour = "red"&lt;/span&gt;)&lt;/code&gt;


&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-111-1.png" width="90%" style="display: block; margin: auto;" /&gt;


![:box 15%, 60%, 20%](&lt;strong&gt;Note:&lt;/strong&gt; When forcing, aesthetic is not inside &lt;code&gt;aes(&amp;rpar;&lt;code&gt;)

---
class: split-50
# Customizing: Legends placement

.columnl[
### At the: top, bottom, left, right

```r
g + theme(legend.position = "top")
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-77-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

.columnr[
### Exactly here

```r
g + theme(legend.position = c(0.15, 0.7))
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-78-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]


---
class: section
# Combining plots

---
# Combining plots with `patchwork`

### Setup
- Load `patchwork`
- Create a couple of different plots


```r
library(patchwork)

g1 &lt;- ggplot(data = penguins, aes(x = bill_length_mm, y = bill_depth_mm, colour = species)) + 
  geom_point()

g2 &lt;- ggplot(data = penguins, aes(x = species, y = flipper_length_mm)) + 
  geom_boxplot()

g3 &lt;- ggplot(data = penguins, aes(x = flipper_length_mm, y = body_mass_g, colour = species)) + 
  geom_point()
```

---
# Combining plots with `patchwork`

### Side-by-Side 2 plots

```r
g1 + g2
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-80-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---
# Combining plots with `patchwork`

### Side-by-Side 3 plots

```r
g1 + g2 + g3
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-81-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---
# Combining plots with `patchwork`

### Stacked 2 plots

```r
g1 / g2
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-82-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Combining plots with `patchwork`

### More complex arrangements

```r
g2 + (g1 / g3)
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-83-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---
# Combining plots with `patchwork`

### More complex arrangements

```r
g2 / (g1 + g3)
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-84-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Combining plots with `patchwork`

### "collect" common legends


```r
g2 / (g1 + g3) + plot_layout(guides = "collect")
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-85-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Combining plots with `patchwork`

### "collect" common legends


```r
g2 / (g1 + g3 + plot_layout(guides = "collect"))
```

&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-86-1.png" width="50%" style="display: block; margin: auto;" /&gt;



---
class: split-55
# Combining plots with `patchwork`

.columnl[
### Annotate
.small[

```r
g2 / (g1 + g3) + 
  plot_layout(guides = "collect") +
  plot_annotation(title = "Penguins Data Summary",          
                  caption = "Fig 1. Penguins Data Summary", 
                  tag_levels = "A",                         
                  tag_suffix = ")")                         
```
]]

.columnr[
&lt;img src="TWS - Intro to R through Figures 2020_files/figure-html/unnamed-chunk-87-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]


---
class: section
# Saving plots

---
# Saving plots

### RStudio Export
**_Demo_**

--

### `ggsave()`


```r
g &lt;- ggplot(penguins, aes(x = sex, y = bill_length_mm, fill = year)) +
  geom_boxplot()

ggsave(filename = "penguins_mass.png", plot = g)
```

```
## Saving 8 x 3.6 in image
```

---
# Saving plots

### Publication quality plots

- Many publications require 'lossless' (pdf, svg, eps, ps) or high quality formats (tiff, png)
- Specific sizes corresponding to columns widths
- Minimum resolutions



```r
g &lt;- ggplot(penguins, aes(x = sex, y = body_mass_g)) +
  geom_boxplot() +
  labs(x = "Sex", y = "Body Mass (g)") + 
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

ggsave(filename = "penguins_mass.pdf", plot = g, dpi = 300,
       height = 80, width = 129, units = "mm")
```




---
# Wrapping up: Common mistakes

- The **package** is `ggplot`**2**, the function is just **`ggplot()`**
- Did you remember to put the **`+`** at the **end** of the line?
- Order matters! If you're using custom `theme()`'s, make sure you put these lines **after** bundled themes like `theme_bw()`, or they will be overwritten
- Variables like 'year' are treated as continuous, but are really categories
  - Wrap them in `factor()`, i.e. `ggplot(data = penguins, aes(x = factor(year), y = body_mass_g))`

---
# Wrapping up: Further reading (all **Free**!)
- RStudio &gt; Help &gt; Cheatsheets &gt; Data Visualization with ggplot2
- [ggplot2 book v3](https://ggplot2-book.org)
  - By Hadley Wickham, Danielle Navarro, and Thomas Lin Pedersen
- [Cookbook for R](http://www.cookbook-r.com) - by Winston Chang
  - See also R Graphics Cookbook by Winston Chang

- [R for Data Science](https://r4ds.had.co.nz)
  - [Data Visualization](http://r4ds.had.co.nz/data-visualisation.html)
  
  
---
# Your Turn!

### Create a figure with...

- Custom colour mapping (i.e. `scales_....`)
- Clear, human-readable labels
- More than one graph, each one tagged (e.g., A) or B))
- With more than one geom type
- At least one scatterplot with regression line

:D

### OR... Load your own data and create a figure of your own!
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
